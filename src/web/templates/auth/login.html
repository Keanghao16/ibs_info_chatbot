{% extends "master.html" %}

{% block title %}Admin Login - IBS Telegram Bot{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center px-4 py-12">
    <div class="max-w-md w-full space-y-8">
        <!-- Logo Section -->
        <div class="text-center">
            <div class="mx-auto w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center shadow-lg animate-pulse">
                <svg class="w-12 h-12 text-white" viewBox="0 0 240 240" xmlns="http://www.w3.org/2000/svg">
                    <path d="m98 175c-3.888 0-3.227-1.468-4.568-5.17L82 132.207 170 80" fill="currentColor" opacity="0.6"/>
                    <path d="m98 175c3 0 4.325-1.372 6-3l16-15.558-19.958-12.035" fill="currentColor" opacity="0.8"/>
                    <path d="m100.04 144.41 48.36 35.729c5.519 3.045 9.501 1.468 10.876-5.123l19.685-92.763c2.015-8.08-3.08-11.746-8.36-9.349l-115.59 44.571c-7.89 3.165-7.843 7.567-1.438 9.528l29.663 9.259 68.673-43.325c3.242-1.966 6.218-.91 3.776 1.258" fill="currentColor"/>
                </svg>
            </div>
            <h2 class="mt-6 text-3xl font-extrabold text-gray-900">
                IBS Admin Panel
            </h2>
            <p class="mt-2 text-sm text-gray-600">
                Telegram Bot Management System
            </p>
        </div>

        <!-- Login Card -->
        <div class="bg-white rounded-2xl shadow-xl p-8 space-y-6">
            <div class="text-center">
                <h3 class="text-xl font-bold text-gray-900 flex items-center justify-center gap-2">
                    <i class="fas fa-sign-in-alt text-primary-500"></i>
                    Administrator Login
                </h3>
                <p class="mt-2 text-sm text-gray-600">
                    Securely sign in with your Telegram account
                </p>
            </div>

            <!-- Telegram Login Widget -->
            <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-8 border-2 border-dashed border-gray-300 hover:border-primary-500 transition-all duration-300">
                <div class="flex justify-center">
                    <script async src="https://telegram.org/js/telegram-widget.js?22"
                        data-telegram-login="{{ bot_username }}"
                        data-size="large"
                        data-auth-url="{{ url_for('auth.telegram_auth', _external=True) }}"
                        data-request-access="write">
                    </script>
                </div>
                <p class="mt-4 text-center text-xs text-gray-500 flex items-center justify-center gap-2">
                    <i class="fas fa-info-circle"></i>
                    Click the button above to authenticate via Telegram
                </p>
            </div>
        </div>

        <!-- Access Levels -->
        <div class="bg-white rounded-2xl shadow-lg p-6">
            <h4 class="text-lg font-bold text-gray-900 mb-4 flex items-center gap-2">
                <i class="fas fa-shield-alt text-primary-500"></i>
                Access Levels
            </h4>
            <ul class="space-y-3">
                <li class="flex items-start gap-3 p-3 rounded-lg hover:bg-green-50 transition-colors">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <div>
                        <span class="font-semibold text-gray-900">Super Admins:</span>
                        <span class="text-gray-600"> Full system control & settings management</span>
                    </div>
                </li>
                <li class="flex items-start gap-3 p-3 rounded-lg hover:bg-green-50 transition-colors">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <div>
                        <span class="font-semibold text-gray-900">Admins/Agents:</span>
                        <span class="text-gray-600"> Chat & user management access</span>
                    </div>
                </li>
                <li class="flex items-start gap-3 p-3 rounded-lg hover:bg-red-50 transition-colors">
                    <i class="fas fa-times-circle text-red-500 mt-1"></i>
                    <div>
                        <span class="font-semibold text-gray-900">Regular Users:</span>
                        <span class="text-gray-600"> No admin panel access</span>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Security Badge -->
        <div class="text-center">
            <span class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-400 to-green-600 text-white rounded-full text-sm font-semibold shadow-lg">
                <i class="fas fa-lock"></i>
                Secured by Telegram OAuth 2.0
            </span>
        </div>

        <!-- Footer -->
        <div class="text-center space-y-2">
            <p class="text-sm text-gray-600">
                <i class="fas fa-question-circle"></i>
                Need help? Contact your system administrator
            </p>
            <p class="text-xs text-gray-500">
                &copy; 2024 IBS Telegram Bot. All rights reserved.
            </p>
        </div>
    </div>
</div>

<script>
    console.log('ü§ñ Bot username:', '{{ bot_username }}');
    console.log('üîó Auth URL:', '{{ url_for("auth.telegram_auth", _external=True) }}');
    
    setTimeout(function() {
        const iframe = document.querySelector('iframe');
        if (iframe) {
            console.log('‚úÖ Telegram widget loaded successfully');
        } else {
            console.error('‚ùå Telegram widget failed to load');
        }
    }, 2000);
</script>
{% endblock %}